<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Imperial House</title>
  <link rel="stylesheet" href="../assets/style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar-title">IMPERIAL HOUSE</div>
    <div class="topbar-items">
      <button class="topbar-item">‚öôÔ∏è</button>
      <button class="topbar-item">üë§</button>
      <button class="topbar-item" onclick="openRightMenu()">Menu</button>
    </div>
  </div>

  <!-- RIGHT MENU -->
  <div id="rightMenu" class="right-menu">
    <div class="right-menu-header">
      <div class="right-menu-title">Navigation</div>
      <button class="right-menu-close" onclick="closeRightMenu()">‚úñ</button>
    </div>
    <ul class="right-menu-nav">
      <li class="right-menu-item active" data-page="dashboard">DASHBOARD</li>
      <li class="right-menu-item" data-page="residents">RESIDENTS</li>
      <li class="right-menu-item" data-page="analytics">ANALYTICS</li>
      <li class="right-menu-item" data-page="reports">REPORTS</li>
    </ul>
  </div>
  <div id="rightMenuOverlay" class="right-menu-overlay" onclick="closeRightMenu()"></div>

  <!-- MAIN CONTENT -->
  <main class="main-content">
    <section id="section-dashboard" class="app-page active-page">
      <h2 class="section-title">Locations</h2>
      <div class="location-cards-container">
        <div class="location-card" data-location="STO.TOMAS PHASE 1">VIA VERDE STO.TOMAS PHASE 1</div>
        <div class="location-card" data-location="Imperial Meadows">Imperial Meadows</div>
        <div class="location-card" data-location="Brgy. Tartaria">Brgy. Tartaria</div>
        <div class="location-card" data-location="Rancho Imperial">Rancho Imperial</div>
        <div class="location-card" data-location="Tagaytay Meridien">Tagaytay Meridien</div>
        <div class="location-card" data-location="The Venetto Heights">The Venetto Heights</div>
        <div class="location-card" data-location="Trece Martires">Trece Martires</div>
        <div class="location-card" data-location="Padre Garcia">Padre Garcia</div>
        <div class="location-card" data-location="Priya Meridian">Priya Meridian</div>
        <div class="location-card" data-location="Cinta Dessa">Cinta Dessa</div>
      </div>
      <div class="map-wrapper">
        <div id="mapContainer"></div>
      </div>
    </section>

    <section id="section-residents" class="app-page">
      <div class="page-header">
        <h2>Residents Management</h2>
      </div>
      <div class="residents-toolbar">
        <button class="primary-btn" onclick="openResidentForm()">+ Add Resident</button>
        <input type="text" id="residentSearch" placeholder="Search residents..." class="search-input">
      </div>
      <div class="residents-table-wrapper">
        <table class="residents-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Project</th>
              <th>Block</th>
              <th>Lot</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="residentsTableBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Modals: Project / Add / Edit / Delete -->
  <!-- PROJECT MODAL -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal-container">
      <div class="modal-top-bar">
        <span id="modalTitle">Project Details</span>
        <button class="close-x" id="modalClose">‚úï</button>
      </div>
      <div class="modal-flex">
        <div class="solar-accent"></div>
        <div class="content-area" id="modalContent"></div>
      </div>
    </div>
  </div>

  <!-- ADD RESIDENT MODAL -->
  <div class="modal-overlay" id="addResidentModal">
    <div class="modal-container small-modal">
      <div class="modal-top-bar">
        <span>Add Resident</span>
        <button class="close-x" onclick="closeAddModal()">‚úï</button>
      </div>
      <div class="modal-flex">
        <div class="content-area">
          <form id="addResidentForm">
            <input type="text" id="addName" placeholder="Full Name" required>
            <input type="text" id="addProject" placeholder="Project" required>
            <input type="text" id="addBlock" placeholder="Block" required>
            <input type="text" id="addLot" placeholder="Lot" required>
            <select id="addStatus">
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
            <div class="modal-actions">
              <button type="submit" class="primary-btn">Save</button>
              <button type="button" class="cancel-btn" onclick="closeAddModal()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- EDIT RESIDENT MODAL -->
  <div class="modal-overlay" id="editResidentModal">
    <div class="modal-container small-modal">
      <div class="modal-top-bar">
        <span>Edit Resident</span>
        <button class="close-x" onclick="closeEditModal()">‚úï</button>
      </div>
      <div class="modal-flex">
        <div class="content-area">
          <form id="editResidentForm">
            <input type="hidden" id="editIndex">
            <input type="text" id="editName" required>
            <input type="text" id="editProject" required>
            <input type="text" id="editBlock" required>
            <input type="text" id="editLot" required>
            <select id="editStatus">
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
            <div class="modal-actions">
              <button type="submit" class="primary-btn">Update</button>
              <button type="button" class="cancel-btn" onclick="closeEditModal()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- DELETE RESIDENT MODAL -->
  <div class="modal-overlay" id="deleteResidentModal">
    <div class="modal-container small-modal">
      <div class="modal-top-bar">
        <span>Delete Resident</span>
        <button class="close-x" onclick="closeDeleteModal()">‚úï</button>
      </div>
      <div class="modal-flex">
        <div class="content-area">
          <h3>Are you sure you want to delete this resident?</h3>
          <div class="modal-actions">
            <button class="danger-btn" onclick="confirmDelete()">Delete</button>
            <button class="cancel-btn" onclick="closeDeleteModal()">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>

 <!-- Leaflet first -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Data first -->
<script src="../javascript/residentstData.js"></script>

<!-- Management functions next -->
<script src="../javascript/app.js"></script>
<script src="../javascript/residentsManagement.js"></script>

<!-- Marker & map scripts last -->
<script src="../javascript/marker.js"></script>
<script src="../javascript/mapModal.js"></script>
<script src="../javascript/map.js"></script>

<!-- Non-module scripts -->
<script src="../javascript/app.js"></script>  
</body>
</html>